(window.webpackJsonp=window.webpackJsonp||[]).push([[8,2,3,4,5,6,7],{376:function(t,e,o){"use strict";o.r(e);o(43);var n={props:{name:{type:String,required:!0},step:{type:String,default:"1"}},emits:["update-continuous-field"],methods:{updateField:function(t){this.$emit("update-continuous-field",this.name,t)}}},l=o(92),component=Object(l.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{"data-cy":"continuous-field-label"}},[t._v(t._s(t.name))]),t._v(" "),e("b-form-input",{staticClass:"numberinput form-control",attrs:{"data-cy":"".concat(t.name,"-continuous-field-input"),type:"number",step:t.step,min:"0"},on:{input:t.updateField}})],1)}),[],!1,null,null,null);e.default=component.exports},377:function(t,e,o){"use strict";o.r(e);o(43);var n={props:{name:{type:String,required:!0},defaultSelected:{type:String,default:null},options:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1}},emits:["update-categorical-field"],data:function(){return{selected:this.defaultSelected}},methods:{updateField:function(){this.$emit("update-categorical-field",this.name,this.selected)}}},l=o(92),component=Object(l.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-3"},[e("b-row",{staticClass:"row"},[e("b-form-group",{staticClass:"col"},[e("label",{staticClass:"form-label",attrs:{"data-cy":"categorical-field-label"}},[t._v(t._s(t.name))])]),t._v(" "),t._t("control")],2),t._v(" "),e("v-select",{attrs:{"data-cy":"".concat(t.name,"-select"),options:t.options,disabled:t.disabled},on:{input:t.updateField},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)}),[],!1,null,null,null);e.default=component.exports},378:function(t,e,o){"use strict";o.r(e);o(28),o(43),o(205);var n={props:{datasetName:{type:String,required:!0},numMatchingSubjects:{type:Number,default:null},imageModals:{type:Array,default:null},selectAll:{type:Boolean,default:!1}},emits:["update-downloads"],data:function(){return{modalities:{"http://purl.org/nidash/nidm#T1Weighted":{name:"T1",style:"background-color: rgb(189, 183, 107);"},"http://purl.org/nidash/nidm#T2Weighted":{name:"T2",style:"background-color: rgb(143, 188, 143); color: white;"},"http://purl.org/nidash/nidm#DiffusionWeighted":{name:"DWI",style:"background-color: rgb(205, 92, 92); color: white;"},"http://purl.org/nidash/nidm#FlowWeighted":{name:"Flow",style:"background-color: rgb(70, 130, 180); color: white;"},"http://purl.org/nidash/nidm#EEG":{name:"EEG",style:"background-color: rgb(216, 191, 216); color: white;"}}}},methods:{updateDownloads:function(){this.$emit("update-downloads",this.datasetName,this.$refs.checkbox.checked)}}},l=o(92),component=Object(l.a)(n,(function(){var t=this,e=t._self._c;return e("b-list-group-item",[e("b-card",[e("b-card-body",[e("b-row",[e("b-col",{attrs:{cols:"8"}},[e("b-row",{staticClass:"d-flex justify-content-center"},[e("b-col",{staticClass:"d-flex align-items-center card-checkbox",attrs:{cols:"1"}},[e("input",{ref:"checkbox",staticClass:"form-check-input dataset-checkbox",attrs:{type:"checkbox",value:"","data-cy":"card-".concat(t.datasetName,"-checkbox")},domProps:{checked:t.selectAll},on:{change:t.updateDownloads}})]),t._v(" "),e("b-col",{staticClass:"card-content",attrs:{cols:"11"}},[e("b-row",[e("h5",{staticClass:"card-title",attrs:{"data-cy":"card-".concat(t.datasetName,"-dataset")}},[t._v("\n                  "+t._s(t.datasetName)+"\n                ")])]),t._v(" "),e("b-row",[e("b-col",{attrs:{cols:"6"}},[e("p",{staticClass:"card-text",attrs:{"data-cy":"card-".concat(t.datasetName,"-subjects")}},[t._v("\n                    "+t._s("".concat(t.numMatchingSubjects," subjects"))+"\n                  ")])])],1)],1)],1)],1),t._v(" "),e("b-col",{attrs:{cols:"4"}},[e("b-row",[e("b-button-toolbar",{staticClass:"d-flex justify-content-end"},t._l(t.imageModals,(function(o){return e("b-button-group",{key:o,staticClass:"mr-2"},[e("b-button",{staticClass:"btn card-modality",style:t.modalities[o].style,attrs:{type:"button","data-cy":"card-".concat(t.datasetName,"-").concat(t.modalities[o].name)}},[t._v("\n                  "+t._s(t.modalities[o].name)+"\n                ")])],1)})),1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},379:function(t,e,o){"use strict";o.r(e);o(282),o(8),o(12),o(10),o(93),o(139),o(32);var n={props:{results:{type:Array,default:function(){return[]}},downloads:{type:Array,default:function(){return[]}}},computed:{displayDownloadResultsButton:function(){return!Object.is(this.results,null)&&0!==this.results.length}},methods:{generateCSVString:function(){var t=this,e=[["dataset","number of matching subjects","subject file paths"]];return this.results.filter((function(e){return t.downloads.includes(e.dataset_name)})).forEach((function(t){t.subject_file_paths.forEach((function(path){e.push([t.dataset_name,t.num_matching_subjects,path].join(","))}))})),e.join("\n")},downloadResults:function(){var element=document.createElement("a");element.setAttribute("href","data:text/csv;charset=utf-8,\n      ".concat(encodeURIComponent(this.generateCSVString()))),element.setAttribute("download","results.csv"),element.style.display="none",document.body.appendChild(element),element.click(),document.body.removeChild(element)}}},l=o(92),component=Object(l.a)(n,(function(){var t=this,e=t._self._c;return t.displayDownloadResultsButton?e("b-col",{staticClass:"d-flex flex-row-reverse",staticStyle:{"margin-top":"1em"}},[e("b-row",{staticClass:"mr-auto"},[e("b-button",{attrs:{id:"download-results-button",disabled:0===t.downloads.length,"data-cy":"download-results-button"},on:{click:t.downloadResults}},[e("b-icon",{attrs:{icon:"download","font-scale":"1"}}),t._v("\n      Download Results\n    ")],1)],1)],1):t._e()}),[],!1,null,null,null);e.default=component.exports},380:function(t,e,o){var content=o(384);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(116).default)("23f7172c",content,!0,{sourceMap:!1})},381:function(t,e,o){"use strict";o.r(e);o(15),o(28),o(34);var n=o(51),l=(o(114),o(205),{props:{categoricalOptions:{type:Object,required:!0}},emits:["update-response"],data:function(){return{minAge:null,maxAge:null,sex:null,diagnosis:null,is_control:!1,min_num_sessions:null,assessment:null,modality:null}},methods:{updateField:function(t,input){switch(t){case"Min Age":this.minAge=input;break;case"Max Age":this.maxAge=input;break;case"Sex":this.sex=this.categoricalOptions[t][input];break;case"Diagnosis":this.diagnosis=this.categoricalOptions[t][input];break;case"Minimum number of sessions":this.min_num_sessions=input;break;case"Assessment tool":this.assessment=this.categoricalOptions[t][input];break;case"Imaging modality":this.modality=this.categoricalOptions[t][input]}},displayToast:function(t){this.$bvToast.toast(t,{appendToast:!0,autoHideDelay:"5000",noCloseButton:!0,solid:!0,title:"Error",variant:"danger"})},validateQueryForm:function(){this.minAge&&this.maxAge&&Number(this.minAge)>Number(this.maxAge)?this.displayToast("Maximum age must be greater than or equal to minimum age"):this.submitQuery()},submitQuery:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="".concat("https://api.neurobagel.org/","query/?"),t.minAge&&(o+="min_age=".concat(t.minAge)),t.maxAge&&(o+="&max_age=".concat(t.maxAge)),t.sex&&(o+="&sex=".concat(t.sex)),t.diagnosis&&!t.is_control&&(o+="&diagnosis=".concat(t.diagnosis)),t.is_control&&(o+="&is_control=".concat(t.is_control)),t.min_num_sessions&&(o+="&min_num_sessions=".concat(t.min_num_sessions)),t.assessment&&(o+="&assessment=".concat(t.assessment)),t.modality&&(o+="&image_modal=".concat(t.modality)),e.prev=9,e.next=12,t.$axios.get(o);case 12:n=e.sent,t.$emit("update-response",n.data,null),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),t.$emit("update-response",null,"Oops, something went wrong");case 19:case"end":return e.stop()}}),e,null,[[9,16]])})))()}}}),r=o(92),component=Object(r.a)(l,(function(){var t=this,e=t._self._c;return e("b-col",{attrs:{cols:"2"}},[e("b-row",[e("h2",[t._v("Query fields")])]),t._v(" "),e("b-row",[e("b-form",{on:{submit:function(e){return e.preventDefault(),t.validateQueryForm.apply(null,arguments)}}},[e("b-form-row",{staticClass:"row"},[e("b-form-group",{staticClass:"col-md-6"},[e("continuous-field",{attrs:{name:"Min Age","data-cy":"min-age-field",step:"any"},on:{"update-continuous-field":t.updateField}})],1),t._v(" "),e("b-form-group",{staticClass:"col-md-6"},[e("continuous-field",{attrs:{name:"Max Age","data-cy":"max-age-field",step:"any"},on:{"update-continuous-field":t.updateField}})],1)],1),t._v(" "),e("categorical-field",{attrs:{name:"Sex","data-cy":"sex-field","default-selected":Object.keys(t.categoricalOptions.Sex)[0],options:Object.keys(t.categoricalOptions.Sex)},on:{"update-categorical-field":t.updateField}}),t._v(" "),e("categorical-field",{attrs:{name:"Diagnosis","data-cy":"diagnosis-field","default-selected":Object.keys(t.categoricalOptions.Diagnosis)[0],options:Object.keys(t.categoricalOptions.Diagnosis),disabled:t.is_control},on:{"update-categorical-field":t.updateField},scopedSlots:t._u([{key:"control",fn:function(){return[e("b-form-group",{staticClass:"col-md-7"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.is_control,expression:"is_control"}],staticClass:"form-check-input",attrs:{"data-cy":"healthy-control-checkbox",type:"checkbox"},domProps:{checked:Array.isArray(t.is_control)?t._i(t.is_control,null)>-1:t.is_control},on:{change:function(e){var o=t.is_control,n=e.target,l=!!n.checked;if(Array.isArray(o)){var r=t._i(o,null);n.checked?r<0&&(t.is_control=o.concat([null])):r>-1&&(t.is_control=o.slice(0,r).concat(o.slice(r+1)))}else t.is_control=l}}}),t._v(" "),e("label",{staticClass:"form-label"},[t._v("Healthy control")])])]},proxy:!0}])}),t._v(" "),e("continuous-field",{attrs:{name:"Minimum number of sessions","data-cy":"min-num-sessions-field",step:"1"},on:{"update-continuous-field":t.updateField}}),t._v(" "),e("categorical-field",{attrs:{name:"Assessment tool","data-cy":"assessment-tool-field","default-selected":Object.keys(t.categoricalOptions["Assessment tool"])[0],options:Object.keys(t.categoricalOptions["Assessment tool"])},on:{"update-categorical-field":t.updateField}}),t._v(" "),e("categorical-field",{attrs:{name:"Imaging modality","data-cy":"modality-field","default-selected":Object.keys(t.categoricalOptions["Imaging modality"])[0],options:Object.keys(t.categoricalOptions["Imaging modality"])},on:{"update-categorical-field":t.updateField}}),t._v(" "),e("b-button",{attrs:{variant:"primary",type:"submit","data-cy":"submit-query"}},[t._v("\n        Submit Query\n      ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ContinuousField:o(376).default,CategoricalField:o(377).default})},382:function(t,e,o){"use strict";o.r(e);o(282),o(28),o(34),o(8),o(12),o(93),o(139),o(10);var n={props:{results:{type:Array,default:null},error:{type:String,default:null}},data:function(){return{selectAll:!1,downloads:[]}},computed:{displayResults:function(){return!Object.is(this.results,null)&&0!==this.results.length}},methods:{summarizeStats:function(){var t=0,e=0;return this.results.forEach((function(o){t+=1,e+=o.num_matching_subjects})),"Summary stats: ".concat(t," datasets, ").concat(e," subjects")},UpdateDownloadsSelectAll:function(){var t=this;this.selectAll?this.results.forEach((function(e){t.downloads.includes(e.dataset_name)||t.downloads.push(e.dataset_name)})):this.downloads=[]},updateDownloads:function(t,e){e?this.downloads.push(t):this.downloads=this.downloads.filter((function(e){return e!==t}))}}},l=o(92),component=Object(l.a)(n,(function(){var t=this,e=t._self._c;return e("b-col",{attrs:{cols:"10"}},[e("b-row",[e("h2",[t._v("Results")])]),t._v(" "),t.displayResults?t._e():e("b-row",{staticClass:"d-flex justify-content-center"},[e("div",{staticClass:"d-flex align-items-center"},[Object.is(t.error,null)?Object.is(t.results,null)?e("h3",{staticStyle:{color:"gray"},attrs:{"data-cy":"default-view"}},[t._v("\n        Click 'Query Metadata' for results\n      ")]):0===t.results.length?e("h3",{staticStyle:{color:"gray"},attrs:{"data-cy":"no-results-view"}},[t._v("\n        No results\n      ")]):t._e():e("h3",{staticStyle:{color:"gray"},attrs:{"data-cy":"error-view"}},[t._v("\n        "+t._s(t.error)+"\n      ")])])]),t._v(" "),t.displayResults?e("b-row",{attrs:{id:"query-controls"}},[e("b-col",{attrs:{cols:"7"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectAll,expression:"selectAll"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"","data-cy":"select-all"},domProps:{checked:Array.isArray(t.selectAll)?t._i(t.selectAll,"")>-1:t.selectAll},on:{change:[function(e){var o=t.selectAll,n=e.target,l=!!n.checked;if(Array.isArray(o)){var r=t._i(o,"");n.checked?r<0&&(t.selectAll=o.concat([""])):r>-1&&(t.selectAll=o.slice(0,r).concat(o.slice(r+1)))}else t.selectAll=l},t.UpdateDownloadsSelectAll]}}),t._v(" "),e("label",{staticClass:"form-label",attrs:{for:"dataset-checkall"}},[t._v("Select all datasets")])]),t._v(" "),e("b-col",{attrs:{cols:"5"}},[e("div",{attrs:{id:"summary-stats"}},[e("p",{attrs:{"data-cy":"summary-stats"}},[t._v("\n          "+t._s(t.summarizeStats())+"\n        ")])])])],1):t._e(),t._v(" "),t.displayResults?e("b-row",{staticClass:"d-flex justify-content-center",attrs:{id:"card-listbox"}},[e("b-list-group",{attrs:{id:"results-list-group"}},t._l(t.results,(function(o){return e("result-card",{key:o.id,attrs:{"dataset-name":o.dataset_name,"num-matching-subjects":o.num_matching_subjects,"image-modals":o.image_modals,"select-all":t.selectAll,"data-cy":o.dataset_name},on:{"update-downloads":t.updateDownloads}})})),1)],1):t._e(),t._v(" "),e("download-results-button",{attrs:{results:t.results,downloads:t.downloads,"data-cy":"download-results"}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ResultCard:o(378).default,DownloadResultsButton:o(379).default})},383:function(t,e,o){"use strict";o(380)},384:function(t,e,o){var n=o(115)((function(i){return i[1]}));n.push([t.i,".btn-group{padding-right:.5em}.btn-toolbar{padding-right:0}.card{background-color:#f2f2f2;border-radius:10px;color:#000}.card-checkbox{padding-right:0}.card-content{padding-left:0}.card-modality{font-size:1em}.card-text{font-size:1.25em}.card-title{font-size:1.75em;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#card-listbox{border:1em;border-bottom-left-radius:10px;border-bottom-right-radius:10px;border-color:gray;height:65vh;overflow-y:auto}#download-results-button{background-color:#0d6efd;color:#fff}#query-controls{padding-bottom:1em;padding-top:1em}#results-list-group{padding-right:0}#summary-stats{float:right}.toast:not(.show){display:block}",""]),n.locals={},t.exports=n},385:function(t,e,o){"use strict";o.r(e);var n={data:function(){return{results:null,error:null,categoricalOptions:{Sex:{All:null,male:"snomed:248153007",female:"snomed:248152002",other:"snomed:32570681000036106"},Diagnosis:{All:null,"Social phobia":"snomed:25501002","Anxiety disorder":"snomed:197480006","Separation anxiety":"snomed:126943008","Traumatic brain injury":"snomed:127295002","Hearing problem":"snomed:300228004","Attention deficit hyperactivity disorder":"snomed:406506008",Fibromyalgia:"snomed:203082005","Disorder of cardiovascular system":"snomed:49601007","Mental disorder":"snomed:74732009","Acute depression":"snomed:712823008",Smoker:"snomed:77176002","Visual impairment":"snomed:397540003",Anxiety:"snomed:48694002",Migraine:"snomed:37796009","Concussion injury of brain":"snomed:110030002","Autism spectrum disorder":"snomed:35919005",Dyslexia:"snomed:59770006","Specific spelling disorder":"snomed:268738002",Schizophrenia:"snomed:58214004","Borderline personality disorder":"snomed:20010003"},"Assessment tool":{},"Imaging modality":{All:null,"Diffusion weighted":"nidm:DiffusionWeighted","Flow weighted":"nidm:FlowWeighted","T1 weighted":"nidm:T1Weighted","T2 weighted":"nidm:T2Weighted"}}}},methods:{updateResponse:function(t,e){this.results=t,this.error=e}}},l=(o(383),o(92)),component=Object(l.a)(n,(function(){var t=this,e=t._self._c;return e("b-container",{attrs:{fluid:""}},[e("b-row",{staticClass:"mx-4"},[e("h1",{staticClass:"mt-2"},[t._v("\n      Query Tool\n    ")]),t._v(" "),e("hr",{staticClass:"mt-0 mb-4"})]),t._v(" "),e("b-row",{staticClass:"mx-4"},[e("query-form",{attrs:{"categorical-options":t.categoricalOptions},on:{"update-response":t.updateResponse}}),t._v(" "),e("results-container",{attrs:{results:t.results,error:t.error}})],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{QueryForm:o(381).default,ResultsContainer:o(382).default})}}]);